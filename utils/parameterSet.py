
mlvar_tk = ['tk_pt', 'tk_eta', 'tk_phi', 'tk_dxybs','tk_dxybs_sig','tk_dz','tk_dz_sig']
mlvar_vtx = ['vtx_ntk', 'vtx_dBV', 'vtx_dBVerr']

normalize_factors_tk_EOY = [
  [7.13, 18],
  [0.1876, 1.115],
  [0.0108, 1.816],
  [3.025e-06, 0.03052],
  [0.01902, 5.188],
  [0.2271, 3.668],
  [54.45, 958.4],
]
normalize_factors_tk_UL = {
  "20161MC":[
    #[9.183334954781358, 23.636026911375808],
    #[0.1739862273800656, 1.0618152934563054],
    #[-0.012287004755910642, 1.8137608121745665],
    #[-0.00026350831557550163, 0.033002019922266104],
    #[-0.004093237366207369, 4.512014348750661],
    #[-0.11324114418125467, 3.7383584596054815],
    #[-11.197034968745818, 645.5924406994626]
    # prefiring weight
    [7.904075968345502, 20.38947560155214],
    [0.17596771345698117, 1.0658322017528834],
    [-0.007757165153390635, 1.8050672787471251],
    [-7.055675218840201e-05, 0.0330356610508609],
    [0.0005997171663401198, 4.666382797172047],
    [0.04973852415928238, 3.6180188722221693],
    [11.155434056274094, 610.5527627422614]
  ],
  "20161":[
    #[8.181482381573131, 19.12529256310103],
    #[0.14315116359121194, 1.0407367894362731],
    #[-0.061590026908830295, 1.813104363168493],
    #[0.00012702132165743696, 0.029517210676429442],
    #[0.01845136663766678, 4.505778902153386],
    #[0.007328222552314757, 3.4494754676675856],
    #[3.8373886561134563, 592.3079313593132]
    # prefiring weight
    [8.195664533781988, 19.178110297699465],
    [0.14208309884332912, 1.0394560881416666],
    [-0.06411760895210379, 1.8113965645204273],
    [0.00012836808562881615, 0.029553487926700064],
    [0.019335975591061257, 4.495623493492196],
    [-0.007749480567747351, 3.4449882044776197],
    [1.3842990670404072, 591.7695733606507]
  ],
  "20162MC":[
    #[9.315400984992205, 23.550611077814928],
    #[0.16503238183147945, 1.077869661173089],
    #[-0.013736646542643971, 1.8249135066691602],
    #[0.000192876853446597, 0.028749091632233454],
    #[0.030090368332366495, 4.360694507410483],
    #[-0.21788138586887842, 3.4990111731623736],
    #[-26.104260889902484, 575.6274689093354]
    [7.852522826942005, 19.905833007761416],
    [0.15123092343061947, 1.078517727841256],
    [-0.009221854720099457, 1.7983090586918502],
    [4.8332092294098624e-05, 0.030778670272640203],
    [0.010690378392950258, 4.539437672844857],
    [0.08417929208310526, 3.5509417148110125],
    [13.872466868394913, 574.8408199907308]
  ],
  "20162":[
    #[7.698680627372921, 17.666657323557253],
    #[0.17862642732774886, 1.088304332366292],
    #[-0.05789315634337729, 1.8235603738374189],
    #[-0.00019809461462200396, 0.033320449906567545],
    #[-0.006913440530618813, 4.428823258765319],
    #[0.13479904036436763, 3.52236688988952],
    #[19.429961886362303, 561.1913581154208]
    [7.7107885542753465, 17.69178745515071],
    [0.17501794923801717, 1.0858432239921214],
    [-0.05786253350495156, 1.8237393815138996],
    [-0.0001890968226586856, 0.03341479770905131],
    [-0.007732151527834364, 4.42739563525876],
    [0.1366233829754425, 3.5107461514257636],
    [19.74965464736283, 560.8395997667036]
  ],
  "2017MC":[
    #[7.319827158117112, 17.923932769581018],
    #[0.1705107572284987, 1.1180865487668386],
    #[0.029649947996248694, 1.8023224071145774],
    #[8.117281021760651e-05, 0.02242394347880475],
    #[-0.004464198209738281, 4.236904063924716],
    #[-0.6538881931255772, 3.710799282685401],
    #[-120.50101704461981, 850.64993037136]
    [6.641727769355736, 16.44515968272161],
    [0.15710880317561143, 1.1370886270349054],
    [-0.02263288935929699, 1.8050221707188299],
    [2.8291324348357997e-05, 0.02512813109462042],
    [0.005511493253943315, 4.530368218138768],
    [0.05293371915661792, 3.5245465069604762],
    [9.847940341646341, 782.3331653773035]
  ],
  "2017":[
    #[6.712935807390548, 17.45712367933874],
    #[0.14317085049516493, 1.107665708876823],
    #[-0.01387718266805023, 1.8042587015882459],
    #[6.885729723579261e-05, 0.02460794980303288],
    #[-0.0029846925850818694, 4.39093343812936],
    #[0.059240021458214914, 3.6633767212263595],
    #[14.537684717563884, 757.1724900064688]
    [6.722276867657625, 17.406637021018387],
    [0.14271277518252318, 1.1040532885974657],
    [-0.01583452137212768, 1.8041768972793693],
    [6.977782247003084e-05, 0.024648149945843505],
    [-0.0027633695653863487, 4.387957833472223],
    [0.05321714365949301, 3.6637062121832424],
    [13.437680887250217, 758.0968737745652]
  ],
  "2018MC":[
    [6.87761527714606, 16.42720878739661],
    [0.12621996589542298, 1.1444403710105255],
    [0.061893112193528846, 1.8373181969152288],
    [5.485766645217457e-07, 0.02450368737229533],
    [-0.007976573377049533, 4.37089582952562],
    [-0.24707312896961844, 3.39170075383676],
    [-47.278571550629, 698.8799378606054]
  ],
  "2018":[
    [6.5890798108880775, 16.52869961337581],
    [0.08206238523351589, 1.1335623391182246],
    [0.08660554158041599, 1.8363829127132902],
    [7.033743884535698e-06, 0.023785978816452863],
    [-0.0065892407262641015, 4.399313416375137],
    [-0.08709977906185637, 3.319998189594504],
    [-17.67532422367329, 631.3640327399293]
  ],
}
normalize_factors_vtx_UL = {
  "20161MC":[
    #[3.2097449579402726, 0.45782965189851477],
    #[0.0258969235980135, 0.06913076844789563],
    #[0.0016677700109852852, 0.00046633470943741273]
    [3.2027394288726057, 0.4500856868288458],
    [0.0255377926568213, 0.01562675397886194],
    [0.0017370221685383419, 0.0004596075340361814]
  ],
  "20161":[
    #[3.2401315789473686, 0.5048136535319172],
    #[0.025525625411414933, 0.018401741189753948],
    #[0.0017146498177297825, 0.0004680109783344373]
    [3.239918480374784, 0.5050108684328118],
    [0.02542055464414094, 0.0182792724501166],
    [0.0017133975981145314, 0.0004689581830763613]
  ],
  "20162MC":[
    #[3.2177684318988553, 0.47139104827901007],
    #[0.02394812302947708, 0.015232157360907654],
    #[0.0016942553297230709, 0.00048815500759292097]
    [3.2010085869830727, 0.4623898037173233],
    [0.026471453122164784, 0.016014444410148012],
    [0.001778034546085436, 0.0004460371826778233]
  ],
  "20162":[
    #[3.213953488372093, 0.4480351913861104],
    #[0.026599844324207582, 0.01921508221891856],
    #[0.0017632288741879164, 0.00043366492345007433]
    [3.215681112630372, 0.449898457811677],
    [0.026419898955597765, 0.018791041193439512],
    [0.0017612494010140274, 0.0004335563754724931]
  ],
  "2017MC":[
    #[3.1946203313166763, 0.4720273542039203],
    #[0.024975178620271328, 0.029378532265422672],
    #[0.001702555716092466, 0.0004681740620782141]
    [3.1815000187321787, 0.4342397431372019],
    [0.0269576092823034, 0.01844762084390442],
    [0.001758893937160606, 0.0004310130795849]
  ],
  "2017":[
    #[3.182741116751269, 0.43371657587580276],
    #[0.025947371816643385, 0.01621871499668949],
    #[0.0017953352742599788, 0.00043068723512371414]
    [3.1829050465114226, 0.43462190235760156],
    [0.025921757109328546, 0.016211873351265425],
    [0.0017965541538764917, 0.0004307965771853281]
  ],
  "2018MC":[
    [3.146778906353386, 0.38700218673691866],
    [0.024537672869607115, 0.019976841101964335],
    [0.001716546392867653, 0.00046246456287888917]
  ],
  "2018":[
    [3.199440820130475, 0.4541613169971124],
    [0.025706772074947013, 0.020228821869093673],
    [0.0017636812024653039, 0.00045871403908471326]
  ],
}
normalize_factors_vtx_EOY = [
  [3.634, 0.3758],
  [0.02555, 0.02167],
  [0.001634, 0.0004853],
]

No = 50
Ds = len(mlvar_tk)
Nr = No*(No-1)
Dp = 20
Dv = len(mlvar_vtx)
Dv_ori = len(mlvar_vtx)
Dr = 1
De = 20
#lambda_dcorr = 0.5
lambda_param = 0.008 # was 0.005
lambda_dcorr_met = 0
lr = 0.0005
use_dR = False
num_epochs=100

isUL = True
#fndir = "/uscms/home/ali/nobackup/LLP/crabdir/MLTreeULV4_norefit_keeptkMETm/"
#fndir = "root://cmseos.fnal.gov//store/user/ali/MLTree_trackdxysig0p5_ULV4_norefit_keeptkMETm/"
#fndir = "/uscms/home/ali/nobackup/LLP/crabdir/MLTreeULV3_keeptkMETm/"
#fndir = "/uscms/home/ali/nobackup/LLP/crabdir/MLTreeULV11METm/"
fndir = "/uscms/home/ali/nobackup/LLP/crabdir/MLTree_nofakeMETveto_ULV11METm/"
dir_model = "./model_0503_ntk_ULV11_nofakeMETveto_8/"

#fns_bkg = [
#    "qcdht0200_2017",
#    "qcdht0300_2017",
#    "qcdht0500_2017",
#    "qcdht0700_2017",
#    "qcdht1000_2017",
#    "qcdht1500_2017",
#    "qcdht2000_2017",
#    "wjetstolnusum_2017",
#    "zjetstonunuht0100_2017",
#    "zjetstonunuht0200_2017",
#    "zjetstonunuht0400_2017",
#    "zjetstonunuht0600_2017",
#    "zjetstonunuht0800_2017",
#    "zjetstonunuht1200_2017",
#    "zjetstonunuht2500_2017",
#    "ttbar_2017",
#]
#fns_signal = [
#    "mfv_splitSUSY_tau000000000um_M2000_1800_2017",
#    "mfv_splitSUSY_tau000000000um_M2000_1900_2017",
#    "mfv_splitSUSY_tau000000300um_M2000_1800_2017",
#    "mfv_splitSUSY_tau000000300um_M2000_1900_2017",
#    "mfv_splitSUSY_tau000001000um_M2000_1800_2017",
#    "mfv_splitSUSY_tau000001000um_M2000_1900_2017",
#    "mfv_splitSUSY_tau000010000um_M2000_1800_2017",
#    "mfv_splitSUSY_tau000010000um_M2000_1900_2017",
#]

fns_bkg = [
    "qcdht0100_2017",
    "qcdht0200_2017",
    "qcdht0300_2017",
    "qcdht0500_2017",
    "qcdht0700_2017",
    "qcdht1000_2017",
    "qcdht1500_2017",
    "qcdht2000_2017",
    "wjetstolnuht0100_2017",
    "wjetstolnuht0200_2017",
    "wjetstolnuht0400_2017",
    "wjetstolnuht0600_2017",
    "wjetstolnuht0800_2017",
    "wjetstolnuht1200_2017",
    "wjetstolnuht2500_2017",
    "zjetstonunuht0100_2017",
    "zjetstonunuht0200_2017",
    "zjetstonunuht0400_2017",
    "zjetstonunuht0600_2017",
    "zjetstonunuht0800_2017",
    "zjetstonunuht1200_2017",
    "zjetstonunuht2500_2017",
    "ww_2017",
    "wz_2017",
    "zz_2017",
    "st_tchan_antitop_2017",
    "st_tchan_top_2017",
    "st_tw_antitop_2017",
    "st_tw_top_2017",
    "ttbar_2017",
]
fns_signal = [
    "mfv_splitSUSY_tau000000100um_M2000_1800_2017",
    "mfv_splitSUSY_tau000000100um_M2000_1900_2017",
    "mfv_splitSUSY_tau000000100um_M2400_2300_2017",
    "mfv_splitSUSY_tau000000300um_M2000_1800_2017",
    "mfv_splitSUSY_tau000000300um_M2000_1900_2017",
    "mfv_splitSUSY_tau000000300um_M2400_2300_2017",
    "mfv_splitSUSY_tau000001000um_M2000_1800_2017",
    "mfv_splitSUSY_tau000001000um_M2000_1900_2017",
    "mfv_splitSUSY_tau000001000um_M1200_1100_2017",
    "mfv_splitSUSY_tau000001000um_M1400_1200_2017",
    "mfv_splitSUSY_tau000001000um_M2400_2300_2017",
    "mfv_splitSUSY_tau000010000um_M2000_1800_2017",
    "mfv_splitSUSY_tau000010000um_M2400_2300_2017",
    #"mfv_splitSUSY_tau000010000um_M1200_1100_2017",
    "mfv_splitSUSY_tau000010000um_M1400_1200_2017",
    "mfv_splitSUSY_tau000010000um_M2000_1900_2017",
]

